<!DOCTYPE html>
<body>

    <div class="back-img-diary">
      <div class="logo">
        <%= link_to root_url do%>
        <%= image_tag ("logo-blue.png")  %>
        <% end %>
      </div>

      <div class="hero-inner">
        <div class="hero-copy">
          <h1 class="diary-title"><%= @diary_entry.title %></h1>
            <h2>Written by <%= @user.email %></h2>

        </div>
      </div>

    </div>

    <ul class="navigation">
      <li>
        <%= link_to current_user, :"data-no-turbolink" => true do %>
        <span>
        <%=  image_tag "MenuBar-icon-profile.png"  %>
        </span>
        <div class="menu-out">
          <%= image_tag "MenuBar-icon-profile-hover.png"%>
          <p>My Profile</p>
        </div>
      <% end %>
    </li>

      <li>
        <%= link_to user_journeys_path(@user) do %>
          <span>
          <%=  image_tag "MenuBar-icon-Journey.png"  %>
          </span>
          <div class="menu-out">
            <%= image_tag "MenuBar-icon-Journey-hover.png"%>
            <p>My Journey</p>
          </div>
        <% end %>
      </li>

      <li>
        <%= link_to user_photos_path(current_user) do %>
        <span>
        <%=  image_tag "MenuBar-icon-PhotoGallery.png"  %>
        </span>
        <div class="menu-out">
          <%= image_tag "MenuBar-icon-PhotoGallery-hover.png"%>
          <p>Gallery</p>
        </div>
        <% end %>
      </li>

      <li><a href="#blog">
        <span>
        <%=  image_tag "MenuBar-icon-timeline.png"  %>
        </span>
        <div class="menu-out">
          <%= image_tag "MenuBar-icon-timeline-hover.png"%>
          <p>My Timeline</p>
        </div>
      </a></li>

      <li>
        <%= link_to user_favourites_path(current_user) do %>
        <span>
        <%=  image_tag "MenuBar-icon-favorites.png"  %>
        </span>
        <div class="menu-out">
          <%= image_tag "MenuBar-icon-favorites-hover.png"%>
          <p>Favourites</p>
        </div>
        <% end %>
    </li>
      <!-- <li><a href="#contact">
        <img src="./images/contact.png" />
      </a></li> -->
    </ul>



<div class="diary-wrapper">
  <div class="diary-picture-stat-section">
    <div class="diary-picture diary_aside">
      <%= image_tag ('Entries_image_1.png') %>
    </div>

    <div class="diary-stats diary_article">
      <div class="diary-stat">
        <%= image_tag ('Entries_icon_location.png') %>
        <h3 class="diary-stat-name">LOCATION</h3>
        <p class="diary-stat-content"><%= @diary_entry.location %></p>
      </div>
      <div class="diary-stat">
        <%= image_tag ('Entries_icon_time.png') %>
        <h3 class="diary-stat-name">DATE</h3>
        <p class="diary-stat-content"><%= @diary_entry.date %></p>
      </div>
      <div class="diary-stat">
        <%= image_tag ('Entries_icon_tag.png') %>
        <h3 class="diary-stat-name">TAGS</h3>
        <div class="activity-tags">
           <% @diary_entry.tags.each do |tag| %>
              <% if tag.body != "recommended" %>
              <span>
                  <%= tag.body %>
              </span>
                <% end %>
          <% end %>

          <% if current_user == @diary_entry.journey.owner %>
            <span class="add-new-tag"><%= link_to "Add Tags" %></span>



          <div class="diary-tag-form">
            <%= form_for [@diary_entry.journey, @diary_entry, Tag.new] do |t| %>

            <%= t.text_field :body, :placeholder => 'Descripe your diary' %>
            <%= t.hidden_field :taggable_id, :value => @diary_entry.id %>
            <%= t.hidden_field :taggable_type, :value => @diary_entry.class %>
            <%= t.hidden_field :user_id, :value => current_user.id %>
            <%= t.submit "Add" %>
            <% end  %>
          </div>
          <% end %>
        </div>

      </div>
      <div class="diary-stat">
        <%= image_tag ('Entries_icon_tips.png') %>
        <h3 class="diary-stat-name">TIPS</h3>
        <p class="diary-stat-content"><%= @diary_entry.recommendation %> </p>

      </div>
    </div>
  </div>

  <div class="diary-content-picture-section">
    <div class="diary-content diary_aside">
      <p><%= raw @diary_entry.content %></p>
      <% if current_user != @diary_entry.journey.owner%>
      <div class="recommend diary-content">
        <div class="recommend-form">
          <%= form_for [@diary_entry.journey, @diary_entry, Tag.new] do |t| %>
          <%= t.hidden_field :body, :value=> 'recommended' %>
          <%= t.hidden_field :taggable_id, :value => @diary_entry.id %>
          <%= t.hidden_field :taggable_type, :value => @diary_entry.class %>
          <%= t.hidden_field :user_id, :value => current_user.id %>
          <%= t.submit "Recommend" %>
          <% end  %>
        </div>
      </div>
      <div class="favourite-diary">
        <% if @diary_entry.favourites.where(user_id: current_user.id).length > 0 %>
          <button class="f-already">
            <span class="fa fa-heart">
              </span>
          </button>
          <div class="favourite-form-already">
            <%= form_for [@diary_entry.journey, @diary_entry, @diary_entry.favourites.where(user_id: current_user.id)[0]], method: :delete do |f| %>
            <%= f.button :class => "submit-already" %>
            <% end %>
          </div>
        <% else %>
          <button class="no-f-yet">
            <span class="fa fa-heart">
              </span>
          </button>
          <div class="favourite-form">
            <%= form_for [@diary_entry.journey, @diary_entry, Favourite.new] do |f| %>
            <%= f.button :class => "f-submit" %>
            <% end %>
          </div>
        <% end %>
      </div>
      <% end %>
    </div>
    <div class="diary-picture diary_article">
      <%= image_tag ('Entries_image_2.png') %>

    </div>

  </div>

  <div class="comment-form-list-section">
    <div class="diary-comment-form diary_aside">
      <%= image_tag ("Entries_SectionTitle_Comments.png") %>
      <% if current_user %>

        <%= form_for [@diary_entry.journey, @diary_entry, @comment], :html => {:class => "comment-form"} do |f| %>
        <%= render partial: 'comments/form', locals: { f: f, commentable: @diary_entry} %>
        <% end %>
      <% else %>
        <p>Please <%= link_to "log in", login_path %> to add a comment.</p>
      <% end %>

      <!-- <%= text_area_tag 'body', nil, rows: 10, cols: 25 , class: "comment-form" %> -->
      <!-- <div class="submit-comment-button-container">
        <button class="profile-button" href="<%= user_photos_path(@user) %>">SUBMIT</button>
        <a href="<%= user_photos_path(@user) %>"><div class = "button-border" >SUBMIT</div></a>
      </div> -->
    </div>

    <div class="comment-list diary_article">
      <% @diary_entry.comments.reverse.each do |c| %>
      <div class="comment-list-item">
        <%= image_tag ("profile-UserImage-1.png") %>
        <h2 class="commenter-name"><%= c.user.name %> </h2><h4 class="commenter-info"><%= @diary_entry.show_time(c.created_at) %></h4>
          <hr class="recomm-underline">
          <p><%= c.body %></p>

      </div>
      <% end %>

      <!-- <div class="comment-list-item">
        <%= image_tag ("profile-UserImage-1.png") %>
        <h2 class="commenter-name">User 1 </h2><h4 class="commenter-info">locaton | 2 hours ago</h4>
          <hr class="recomm-underline">
          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad </p>

      </div> -->
<!--
      <div class="comment-list-button-container">
        <button class="profile-button" href="<%= user_photos_path(@user) %>">VIEW MORE</button>
        <a href="<%= user_photos_path(@user) %>"><div class = "button-border" >VIEW MORE</div></a>
      </div> -->

    </div>
  </div>

</div>





<!--


<h1><%= link_to @diary_entry.title, journey_diary_entry_path(@diary_entry.journey, @diary_entry) %></a></h1>

  <strong><%= link_to "Edit", edit_journey_diary_entry_path(@diary_entry.journey, @diary_entry) %></strong>
  <p>Location: <%= @diary_entry.location %></p>
  <br>
  <p>Longitude : <%= @diary_entry.longitude %> </p>
  <br>
  <p>Latitude : <%= @diary_entry.latitude %> </p>
  <br>
  <p>Time: <%= @diary_entry.date %></p>
  <br>
  <p>Recommendations: <%= @diary_entry.recommendation %></p>
  <br>
  <p>Content: <%= @diary_entry.content %></p>

  <h4>Tags :</h4>
    <div id="diary-tags-list" >

        <% @diary_entry.tags.each do |tag| %>
            <%= tag.body %>
        <% end  %>
      </div>
        <div class="each-tag">

  </div>

  <% if current_user == @diary_entry.journey.owner %>
    <div class="add-new-tag">
      <h4><%= link_to "Add Tags" %></h4>
    </div>

  <div class="tag-form">
    <%= form_for [@diary_entry.journey, @diary_entry, Tag.new] do |t| %>

    <%= t.label :Description  %>
    <%= t.text_field :body, :placeholder => 'Descripe your diary' %>
    <%= t.hidden_field :taggable_id, :value => @diary_entry.id %>
    <%= t.hidden_field :taggable_type, :value => @diary_entry.class %>
    <%= t.hidden_field :user_id, :value => current_user.id %>
    <%= t.submit "Add" %>
    <% end  %>
  </div>
  <% end %>

  <br>
  <br>




  <div class="recommend">
    <% if current_user != @diary_entry.journey.owner_id && current_user.tags.where(body: "recommended", taggable_id: @diary_entry.id) == [] %>
    <div class="recommend-form">
      <%= form_for [@diary_entry.journey, @diary_entry, Tag.new] do |t| %>
      <%= t.hidden_field :body, :value=> 'recommended' %>
      <%= t.hidden_field :taggable_id, :value => @diary_entry.id %>
      <%= t.hidden_field :taggable_type, :value => @diary_entry.class %>
      <%= t.hidden_field :user_id, :value => current_user.id %>
      <%= t.submit "Recommend" %>
      <% end  %>
    </div>
    <% end %>
  </div>



  <div class="photo-form">
    <%= form_for Photo.new, html: { multipart: true, id: "my-awesome-dropzone", class: "dropzone"} do |t| %>
      <%= t.label :name  %>
      <br>
      <%= t.text_field :name %>
      <br>
      <div class="dropzone-previews"></div>
      <br>

      <%= t.hidden_field :imageable_id, :value => @diary_entry.id %>
      <%= t.hidden_field :imageable_type, :value => @diary_entry.class %>
    <% end  %>

  </div>

  <%= render partial: 'comments/list', locals: { commentable: @diary_entry }  %>

  <% if current_user %>
    <h4>Write a comment:</h4>
    <%= form_for [@diary_entry.journey, @diary_entry, @comment], :html => {:class => "comment-form"} do |f| %>
    <%= render partial: 'comments/form', locals: { f: f, commentable: @diary_entry} %>
    <% end %>

  <% else %>
    <p>Please <%= link_to "log in", login_path %> to add a comment.</p>
  <% end %>



  <div id="map"></div>



 -->


</body>
